---
title: "Curso de R"
subtitle: "Webscrapeando a rede"
author: Antón Blanco Vilariño
date: 2 de febreiro, 2024
output: 
  revealjs::revealjs_presentation:
        css: titulo.css
        theme: moon
        center: true
        highlight: null
        self_contained: false
        reveal_options:
           slideNumber: true
           previewLinks: true
---




<!-- KAte, Tango, espresso, zenburn ou null son validos  como highlight -->


# En que consite o <span style=" color: #FCF174;"> webscraping</span>?

En extraer datos dunha páxina web


. . .

<span style="   color: #FC74A4;"> Entre outros moitos usos </span> 



## Usos habituais

. . .

Limpar datos, é dicir, facelos máis lexibles

. . .

Aplicarlle diversas técnicas

. . .

Debuxalos

. . .

Crear documentos


. . .


Crear aplicacións


## Cómo se usa?

. . .

1. Instalando o sofware **R** na páxina:
<br> 
<https://www.r-project.org/>.

2. Engadindo un **IDE** (*integrated development environment *) para un uso máis sinxelo. Nós usaremos [RStudio](https://posit.co/download/rstudio-desktop/).


# Dentro de <span style=" color: #FCF174;"> RStudio </span> {data-background-image="imaxes/01_paneles_rstudio.png"}


## Panel <span style=" color: #FCF174;"> espazo de traballo  </span> {data-background-image="imaxes/02_panel_espazo_traballo.png"}

## Panel <span style=" color: #FCF174;"> Consola </span> {data-background-image="imaxes/03_panel_consola.png"}

## Panel <span style=" color: #FCF174;"> Entorno e historial </span> {data-background-image="imaxes/04_panel_entorno_historial.png"} 

## Panel <span style=" color: #FCF174;"> arquivos e plots </span> {data-background-image="imaxes/05_panel_arquivos_plots.png"}


# R e os  <span style=" color: #FCF174;"> paquetes </span> 


Son elementos básicos onde está a información primordial desta linguaxe: <span style=" color: #FC74A4;"> as funcións </span>

**Onde atopalos?**

* [CRAN](https://cran.r-project.org/) 

 <img src="imaxes/06_cran.png" alt="CRAN" class="center"> 
 
 
 * [Github](https://github.com/rstudio/revealjs)
 
 
 <img src="imaxes/07_github.png" alt="CRAN" class="center" width = "100" height = "100" >  
 
 
# Boas <span style=" color: #FCF174;"> prácticas </span>


## {data-background-image="imaxes/08_estrutura_directorios.png"}

## Nomes dos arquivos


* Evita usar <span style=" color: #FCF174;"> espazos </span> e reempraza estes por <span style=" color: #FCF174;"> guións baixos </span>.

* Evita usar caracteres especiais: <span style=" color: #FCF174;"> @£$%^&*(:/) </span>.

* Se usas versións dun arquivo e tés máis de 9 emprega nas anteriores <span style=" color: #FCF174;"> 01 </span>, <span style=" color: #FCF174;"> 02 </span>,<span style=" color: #FCF174;"> 03 </span>,... E se tés máis de 99 emprega <span style=" color: #FCF174;"> 001 </span>, <span style=" color: #FCF174;"> 002 </span>,<span style=" color: #FCF174;"> 003 </span>,...

* Nomea as datas seguindo o formato <span style=" color: #FCF174;"> ISO 8601 </span> (**YYYY-MM-DD** ou **YYYYMMDD**).

* Nunca uses o sufixo <span style=" color: #FCF174;"> final </span> en ningún dos teus arquivos (*Nunca é o último!*).


# Operadores

Son símbolos que lle indican a **R** que tarefas debe realizar.

## Operadores aritméticos

| Operador | Operación        | Exemplo | Resultado |
|----------|------------------|---------|-----------|
| +        | Suma             | 5 + 3   | 8         |
| -        | Resta            | 5 - 3   | 2         |
| *        | Multiplicación   | 5 * 3   | 18        |
| /        | División         | 5 /3    | 1.666667  |
| ^        | Potencia         | 5 ^ 3   | 125       |
| %%       | División enteira | 5 %% 3  | 2         |


## Operadores relacionais


| Operador |      Comparación      | Exemplo | Resultado |
|:--------:|:---------------------:|:-------:|:---------:|
| <        | Menor que             | 5 < 3   | FALSE     |
| <=       | Menor ou igual que    | 5 <= 3  | FALSE     |
| >        | Maior que             | 5 > 3   | TRUE      |
| >=       | Maior ou igual que    | 5 >= 3  | TRUE      |
| ==       | Exactamente igual que | 5 == 3  | FALSE     |
| !=       | Non é igual que       | 5 != 3  | TRUE      |

## Operadores lóxicos

|  Operador |          Comparación          |    Exemplo    | Resultado |
|:---------:|:-----------------------------:|:-------------:|:---------:|
| x \| y    | x Ó y é verdadeiro            | TRUE \| FALSE | TRUE      |
| x & y     | x Y y son verdadeiros         | TRUE & FALSE  | FALSE     |
| !x        | x non é verdadeiro (negación) | !TRUE         | FALSE     |
| isTRUE(x) | x é verdadeiro (afirmación)   | isTRUE(TRUE)  | TRUE      |


## Operadores de asignación

| Operador |            Operación            |
|:--------:|:-------------------------------:|
| <-       | Asigna un valor a unha variable |
| =        | Asigna un valor a unha variable |

# Tipos de datos

|<span style=" color: #FCF174;"> Tipo </span>           |<span style=" color: #FCF174;"> Exemplo </span>     |<span style=" color: #FCF174;"> Nome en inglés </span>        |
|:------------------|:---------|:------------------|
|Enteiro            | **1** |  _integer_ | 
|Numérico | **1.3** | _numeric_  |
|Cadea de texto |  **"un"** |*character* |
|Factor | **un**  | _factor_ |
|Lóxico | **TRUE** | _logical_ |
|Faltante | **NA**  | _NA_ |
|Baleiro | **NULL**  | _null_ |


# Tipos de estructuras

* Escalares e vectores.
* Matrices e arrays.
* Listas.
* Data frames.




## Vectores

```{r}
vector <- c(1 , 2, "a")

vector
```

## Matrices

```{r}
matriz <- matrix(c(2, 0, 1, 1), nrow = 2) 

matriz
```

## Factores

```{r}
factor <- factor("a")

factor
```

## Data frames

```{r}
mi_df <- data.frame(
  "entero" = 1:4, 
  "factor" = c("a", "b", "c", "d"), 
  "numero" = c(1.2, 3.4, 4.5, 5.6),
  "cadena" = as.character(c("a", "b", "c", "d"))
)

mi_df
```

## Listas

```{r}
lista <- list(c("black", "yellow", "orange"),
               c(TRUE, TRUE, FALSE, TRUE, FALSE, FALSE),
               matrix(1:6, nrow = 3))

lista
```

# Elementos de programación


## Declaración condicional


  **if** (condicion) {
    
 _Execútase o código se a condición é TRUE_
    
  } **else** {
    
  _Execútase o código se a condición é FALSE_
    
  }



## Bucle

```{r}
for (variable in vector) {
  
}

```

**Exemplo**

```{r}
for (i in 1:5) {
  print(i)
}

```



## Función

```{r}
nome_da_funcion <- function(argumento_1, argumento_2) {
  
  # expresión
  
}

nome_da_funcion(argumento_1, argumento_2)

```



# Referencias

- [Guía para principiantes de webscraping con R](https://jorgeromero.net/web-scraping-usando-r/)
- [Guía completa de webscraping en R con rvest](https://webscrapingsite.com/es/resources/web-scraping-r/)
- [Introdución ao webscraping con R](https://programminghistorian.org/es/lecciones/introduccion-al-web-scraping-usando-r)